(function(e){function t(t){for(var a,o,i=t[0],c=t[1],u=t[2],p=0,v=[];p<i.length;p++)o=i[p],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&v.push(n[o][0]),n[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);l&&l(t);while(v.length)v.shift()();return s.push.apply(s,u||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],a=!0,i=1;i<r.length;i++){var c=r[i];0!==n[c]&&(a=!1)}a&&(s.splice(t--,1),e=o(o.s=r[0]))}return e}var a={},n={app:0},s=[];function o(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=a,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(r,a,function(t){return e[t]}.bind(null,a));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=c;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var a=r("85ec"),n=r.n(a);n.a},"56d7":function(e,t,r){"use strict";r.r(t);r("e623"),r("e379"),r("5dc8"),r("37e1");var a=r("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},s=[],o={name:"App"},i=o,c=(r("034f"),r("2877")),u=Object(c["a"])(i,n,s,!1,null,null,null),l=u.exports,p=r("8c4f"),v=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("h1",[e._v("Manage gateways - master devices")]),e.error?r("p",{staticClass:"error"},[e._v(e._s(e.error))]):e._e(),e.success?r("p",{staticClass:"success"},[e._v(e._s(e.success))]):e._e(),r("div",{staticClass:"create-gateway"},[r("h3",[e._v("Add new Gateway")]),r("label",{attrs:{for:"name"}},[e._v("Name: ")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{type:"text",id:"name",name:"name",placeholder:"Gateway's name"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),r("label",{attrs:{for:"serial"}},[e._v(" Serial: ")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.serial,expression:"serial"}],attrs:{type:"text",id:"serial",name:"serial",placeholder:"Gateway's serial number"},domProps:{value:e.serial},on:{input:function(t){t.target.composing||(e.serial=t.target.value)}}}),r("label",{attrs:{for:"ipv4"}},[e._v(" IP Address: ")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.ipv4,expression:"ipv4"}],attrs:{type:"text",id:"ipv4",name:"ipv4",placeholder:"IP Address"},domProps:{value:e.ipv4},on:{input:function(t){t.target.composing||(e.ipv4=t.target.value)}}}),r("button",{on:{click:e.createGateway}},[e._v("Add")])]),r("hr"),r("div",{staticClass:"gateways-list"},[r("h1",[e._v("Gateway's List")]),e._l(e.gateways,(function(t,a){return r("div",{key:a,staticClass:"gateway"},[r("p",[r("router-link",{attrs:{to:{name:"gelement",params:{id:t._id}}}},[e._v(e._s(t.name))]),e._v(" "),r("small",[e._v("("+e._s(t.peripherals.length)+")")]),e._v(" "),r("button",{on:{click:function(r){return e.removeGateway(t._id)}}},[e._v("Delete")])],1)])}))],2)])},d=[],f=(r("b0c0"),r("96cf"),r("1da1")),h=r("d4ec"),m=r("bee2"),w=r("bc3a"),g=r.n(w),y=function(){function e(){Object(h["a"])(this,e)}return Object(m["a"])(e,null,[{key:"getGateways",value:function(){return g.a.get("api/gateways").then((function(e){return e.data})).catch((function(e){throw new Error(e.message)}))}},{key:"insertGateway",value:function(e,t,r){return g.a.post("api/gateways",{name:e,serial:t,ipv4:r}).then((function(e){if(e.data.errors)throw e.data.errors.ipv4?new Error(e.data.errors.ipv4.properties.message):new Error(e.data.message);return e})).catch((function(e){throw new Error(e.message)}))}},{key:"removeGateway",value:function(e){return g.a.post("api/gateway/remove",{gID:e}).then((function(e){if(e.data.errors)throw new Error(e.data.message);return e})).catch((function(e){throw new Error(e.message)}))}},{key:"getGateway",value:function(e){return g.a.get("/api/gateway/"+e).then((function(e){return e.data})).catch((function(e){throw new Error(e.message)})).catch((function(e){throw new Error(e.message)}))}}]),e}(),_=y,b={name:"Gateways",data:function(){return{gateways:[],error:"",serial:"",ipv4:"",name:"",success:""}},created:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_.getGateways();case 3:e.gateways=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),e.error=t.t0.message;case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},methods:{createGateway:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.serial&&e.name&&e.ipv4){t.next=2;break}return t.abrupt("return",e.error="All fields are required");case 2:return t.prev=2,e.error="",t.next=6,_.insertGateway(e.name,e.serial,e.ipv4);case 6:return r=t.sent,e.success=r.data,t.next=10,_.getGateways();case 10:e.gateways=t.sent,e.name="",e.serial="",e.ipv4="",t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](2),e.success="",e.error=t.t0;case 20:case"end":return t.stop()}}),t,null,[[2,16]])})))()},removeGateway:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=_.removeGateway(e),t.success=a.data,r.next=4,_.getGateways();case 4:t.gateways=r.sent;case 5:case"end":return r.stop()}}),r)})))()}}},x=b,k=(r("870c"),Object(c["a"])(x,v,d,!1,null,"117387d7",null)),O=k.exports,P=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.gateway?r("div",{staticClass:"container",attrs:{div:""}},[e.error?r("p",{staticClass:"error"},[e._v(e._s(e.error))]):e._e(),e.success?r("p",{staticClass:"success"},[e._v(e._s(e.success))]):e._e(),r("div",{staticClass:"create-gateway"},[r("h3",[e._v("Add new Peripheral to "+e._s(e.gateway.name))]),r("label",{attrs:{for:"vendor"}},[e._v("Vendor: ")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.vendor,expression:"vendor"}],attrs:{type:"text",id:"vendor",name:"vendor",placeholder:"Peripheral's vendor"},domProps:{value:e.vendor},on:{input:function(t){t.target.composing||(e.vendor=t.target.value)}}}),r("label",{attrs:{for:"status"}},[e._v(" Status: ")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.status,expression:"status"}],attrs:{name:"status",id:"status"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.status=t.target.multiple?r:r[0]}}},[r("option",{attrs:{value:"Online"}},[e._v("Online")]),r("option",{attrs:{value:"Offline"}},[e._v("Offline")])]),r("button",{on:{click:e.createPeripheral}},[e._v("Add")])]),r("div",{staticClass:"gateway-info"},[r("h1",[e._v("Gateway: "+e._s(e.gateway.name))]),r("p",[e._v("Name: "+e._s(e.gateway.name))]),r("p",[e._v("Serial: "+e._s(e.gateway.serial))]),r("p",[e._v("IP Address: "+e._s(e.gateway.ipv4))]),r("p",[r("router-link",{attrs:{to:{name:"glist"}}},[e._v("Back to list")])],1)]),r("hr"),r("div",{staticClass:"pripherals"},[r("h3",[e._v("Peripheral's List")]),r("table",[e._m(0),r("tbody",e._l(e.peripherals,(function(t,a){return r("tr",{key:a},[r("td",[e._v(e._s(a+1))]),r("td",[e._v(e._s(t.UID))]),r("td",[e._v(e._s(t.vendor))]),r("td",[e._v(e._s(t.date))]),r("td",[e._v(e._s(t.status))]),r("td",[r("button",{on:{click:function(r){return e.removePeripheral(t._id)}}},[e._v("Delete")])])])})),0)])])]):r("div",[r("p",[e._v(e._s(e.error))]),r("p",[r("router-link",{attrs:{to:{name:"glist"}}},[e._v("Back to list")])],1)])},G=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("thead",[r("tr",[r("th",[e._v("No.")]),r("th",[e._v("UID")]),r("th",[e._v("VENDOR")]),r("th",[e._v("DATE")]),r("th",[e._v("STATUS")]),r("th",[e._v("ACTIONS")])])])}],j=function(){function e(){Object(h["a"])(this,e)}return Object(m["a"])(e,null,[{key:"insertPeripheral",value:function(e,t,r){return g.a.post("/api/peripheral",{vendor:e,status:t,gID:r}).then((function(e){if(e.data.errors)throw e.data.errors.peripherals?new Error(e.data.errors.peripherals.properties.message):new Error(e.data.message);return e})).catch((function(e){throw new Error(e.message)}))}},{key:"getPeripheral",value:function(e){return g.a.get("/api/peripheral/"+e).then((function(e){return e.data})).catch((function(e){throw new Error(e.message)}))}},{key:"removePeripheral",value:function(e){return g.a.post("/api/peripheral/remove",{pID:e}).then((function(e){if(e.data.errors)throw new Error(e.data.message);return e})).catch((function(e){throw new Error(e.message)}))}}]),e}(),E=j,A={name:"Gateway",data:function(){return{gateway:"",vendor:"",status:"",error:"",success:"",peripherals:[]}},created:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_.getGateway(e.$route.params.id);case 3:e.gateway=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),e.error=t.t0;case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},methods:{createPeripheral:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.vendor&&e.status){t.next=2;break}return t.abrupt("return",e.error="All fields are required");case 2:return t.prev=2,e.error="",t.next=6,E.insertPeripheral(e.vendor,e.status,e.$route.params.id);case 6:return r=t.sent,e.success=r.data,t.next=10,_.getGateway(e.$route.params.id);case 10:e.gateway=t.sent,e.vendor="",t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](2),e.success="",e.error=t.t0;case 18:case"end":return t.stop()}}),t,null,[[2,14]])})))()},removePeripheral:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,t.error="",a=E.removePeripheral(e),t.success=a.data,r.next=6,_.getGateway(t.$route.params.id);case 6:t.gateway=r.sent,r.next=13;break;case 9:r.prev=9,r.t0=r["catch"](0),t.success="",t.error=r.t0;case 13:case"end":return r.stop()}}),r,null,[[0,9]])})))()}},watch:{gateway:function(){var e=this;try{if(this.error="",!this.gateway)return this.error="Gateway not found";var t=this.gateway.peripherals;for(var r in this.peripherals=[],t)E.getPeripheral(t[r]).then((function(t){t&&e.peripherals.push(t)})).catch((function(t){e.error=t}))}catch(a){this.success="",this.error=a.message}}}},C=A,R=(r("e29a"),Object(c["a"])(C,P,G,!1,null,"4a7136d4",null)),S=R.exports;a["a"].use(p["a"]);var N=new p["a"]({mode:"history",routes:[{path:"/",name:"glist",component:O},{path:"/gateway/:id",name:"gelement",component:S},{path:"*",name:"notfound",component:O}]});a["a"].config.productionTip=!1,a["a"].use(N),new a["a"]({router:N,render:function(e){return e(l)}}).$mount("#app")},"85ec":function(e,t,r){},"870c":function(e,t,r){"use strict";var a=r("c2a6"),n=r.n(a);n.a},bc90:function(e,t,r){},c2a6:function(e,t,r){},e29a:function(e,t,r){"use strict";var a=r("bc90"),n=r.n(a);n.a}});
//# sourceMappingURL=app.11eaa726.js.map